<html>
<head>
    <title>My Web Page</title>  
</head>
<body>
    <h1>WebGL</h1>
    <canvas id="myCanvas" width="1200" height="800" style="border:1px solid #000000;"></canvas>
     <script defer>
        const canvas = document.getElementById("myCanvas");
const gl = canvas.getContext("webgl");

if (!gl) {
  throw new Error("WebGL not supported");
}

// ----- Vertex shader -----
const vsSource = `
attribute vec2 a_position;
uniform vec2 u_resolution;
uniform vec2 u_translation; // px

void main() {
  // convert from pixels to 0..1
  vec2 zeroToOne = (a_position + u_translation) / u_resolution;

  // convert to 0..2
  vec2 zeroToTwo = zeroToOne * 2.0;

  // convert to -1..+1
  vec2 clipSpace = zeroToTwo - 1.0;

  // flip Y (top-left â†’ bottom-left)
  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
}
`;

// ----- Fragment shader -----
const fsSource = `
  precision mediump float;
  void main() {
    gl_FragColor = vec4(0.6, 0.6, 0.6, 1.0); // gray
  }
`;

// ----- Compile shader -----
function createShader(gl, type, source) {
  const shader = gl.createShader(type);
  gl.shaderSource(shader, source);
  gl.compileShader(shader);
  return shader;
}

const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);

// ----- Link program -----
const program = gl.createProgram();
gl.attachShader(program, vertexShader);
gl.attachShader(program, fragmentShader);
gl.linkProgram(program);
gl.useProgram(program);

// ----- Rectangle geometry (two triangles) -----
const vertices = new Float32Array([
   0.0 ,  0.0,  // v0 top-left
   10.0,  0.0,  // v1 top-right
   0.0, 10.0,  // v2 bottom-left
   10.0, 10.0   // v3 bottom-right
]);

gl.uniform2f(
  gl.getUniformLocation(program, "u_resolution"),
  canvas.width,
  canvas.height
);

const buffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

// ----- Bind attribute -----
const posLoc = gl.getAttribLocation(program, "a_position");
gl.enableVertexAttribArray(posLoc);
gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0);

// ----- Clear + draw -----
gl.clearColor(0, 0, 0, 1);
gl.clear(gl.COLOR_BUFFER_BIT);

gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

const u_translationLoc = gl.getUniformLocation(program, "u_translation");

let mx = -6.5;
let my = -4.5;
let x = 0.0;
let y = 0.0;

function render(time) {
  gl.clearColor(0, 0, 0, 1);   // black
  gl.clear(gl.COLOR_BUFFER_BIT);
  
  gl.uniform2f(u_translationLoc, x, y);
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
  requestAnimationFrame(render);

  x += mx;
  y += my;
  if (x > canvas.width - 10.0 || x < 0) mx = -mx;
  if (y > canvas.height - 10.0 || y < 0) my = -my;
}

requestAnimationFrame(render);

    </script>
</body>
</html>